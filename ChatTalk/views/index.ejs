<!DOCTYPE html>
<html>

<head>
  <title>ChatTalk Test</title>
  <link rel='stylesheet' href='/stylesheets/style.css' />
</head>

<body>
  <h1>Socket.io BaÄŸlantÄ± Testi</h1>
  <p>Sunucu durumu iÃ§in terminalini, tarayÄ±cÄ± durumu iÃ§in F12 (Console) sekmesini kontrol et.</p>

  <script src="/socket.io/socket.io.js"></script>

  <script>
    const MY_TOKEN = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OTM4NDAwNTMyMmY5YWIzMzliMmJiZGYiLCJ1c2VyTmFtZSI6InNlbmRlcl9mdXJrYW4iLCJpYXQiOjE3NjUzNzA3MTYsImV4cCI6MTc2NTk3NTUxNn0.LnckNGic8t4uF7LOUVl6owcsfaa9w7oSitUZTTW3Cqw";
    
    const socket = io({
        auth: {
          token: MY_TOKEN
        }
      });

    socket.on('connect', () => {
      console.log('âœ… TarayÄ±cÄ±: Sunucuya baÅŸarÄ±yla baÄŸlandÄ±m!');
      console.log('ğŸ†” Benim Socket ID\'m:', socket.id);

      const TEST_RECIVER_ID = "69384018322f9ab339b2bbe2";
      console.log(`ğŸ“¨ Sunucuya Ã¶zel mesaj gÃ¶nderiliyor`);
      socket.emit("sendMessage", {
        recipientId: TEST_RECIVER_ID,
        content: "Selam! Bu mesaj Repository katmanÄ±ndan geÃ§ip veritabanÄ±na yazÄ±ldÄ±."
      });
    },2000);

    socket.on("sendMessage", (response) => {
        console.log("âœ… BAÅARILI! Sunucu cevabÄ±:", response);
    });
    
    socket.on("connect_error", (err) => {
        console.log("â›” BaÄŸlantÄ± Reddedildi (Sunucudan Mesaj):", err.message);
    });
    
    socket.on('disconnect', () => {
      console.log('âŒ TarayÄ±cÄ±: Sunucuyla baÄŸlantÄ± koptu.');
    });
  </script>
</body>

</html>